app:
  name: java-pii-guard
  environment: dev
  logLevel: INFO

beam:
  runner: DirectRunner
  jobName: pii-guard-local
  tempLocation: /tmp/beam-tmp

input:
  format: csv
  filePattern: s3://pii-bucket/input/*.csv
  textField: text
  idField: record_id
  skipHeaderLines: 1
  csvDelimiter: ","
  csvHeaders:
    - record_id
    - text
    - source
  jsonField: text

s3:
  endpoint: http://minio:9000
  region: us-east-1
  pathStyleAccess: true
  accessKeyEnv: MINIO_ACCESS_KEY
  secretKeyEnv: MINIO_SECRET_KEY

presidio:
  analyzerUrl: http://presidio-analyzer:3000
  anonymizerUrl: http://presidio-anonymizer:3000
  language: en
  scoreThreshold: 0.5
  entities:
    - EMAIL_ADDRESS
    - PHONE_NUMBER
    - US_SSN
    - CREDIT_CARD
  hashSaltEnv: PII_HASH_SALT
  hashSalt: PLACEHOLDER_SALT
  customRecognizers:
    - name: email_regex
      supportedEntity: EMAIL_ADDRESS
      regex: "[A-Z0-9._%+-]+@[A-Z0-9.-]+\\.[A-Z]{2,}"
      flags: "i"
      score: 0.65
    - name: phone_regex
      supportedEntity: PHONE_NUMBER
      regex: "\\+?1?[-. (]*(\\d{3})[-. )]*(\\d{3})[-. ]*(\\d{4})"
      flags: "i"
      score: 0.6
    - name: ssn_regex
      supportedEntity: US_SSN
      regex: "\\b\\d{3}-\\d{2}-\\d{4}\\b"
      flags: ""
      score: 0.7
    - name: credit_card_regex
      supportedEntity: CREDIT_CARD
      regex: "\\b(?:\\d[ -]*?){13,16}\\b"
      flags: ""
      score: 0.6
  anonymizers:
    DEFAULT:
      type: redact
    EMAIL_ADDRESS:
      type: hash
      hash_type: sha256
    PHONE_NUMBER:
      type: hash
      hash_type: sha256
    US_SSN:
      type: hash
      hash_type: sha256
    CREDIT_CARD:
      type: hash
      hash_type: sha256

monitoring:
  logsEnabled: true
  metricsEnabled: true

elasticsearch:
  url: http://elasticsearch:9200
  logsIndexPrefix: ppi-logs
  metricsIndexPrefix: ppi-metrics
  usernameEnv: ELASTIC_USERNAME
  passwordEnv: ELASTIC_PASSWORD
  bulkSize: 500
  bulkFlushSeconds: 5

postgres:
  jdbcUrl: jdbc:postgresql://postgres:5432/pii
  table: pii_records
  userEnv: POSTGRES_USER
  passwordEnv: POSTGRES_PASSWORD
  batchSize: 500
